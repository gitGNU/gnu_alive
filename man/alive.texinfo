\input texinfo @c -*-texinfo-*-
@c This file uses the @command command introduced in Texinfo 4.0.
@c %**start of header
@setfilename alive.info
@settitle GNU Alive: Auto-login & keep-alive for Internet connections.
@finalout
@setchapternewpage odd
@c %**end of header

@set PACKAGE_NAME alive
@set PACKAGE_VERSION 1.3.4

@c All the nodes can be updated using the EMACS command
@c texinfo-every-node-update, which is normally bound to C-c C-u C-e.
@node Top, Introduction, (dir), (dir)
@cindex Description
@top @value{PACKAGE_NAME}: Auto-login & keep-alive daemon

@ifinfo
This file documents the @value{PACKAGE_NAME} utility. An auto-login &
keep-alive daemon for Internet connections.

@value{PACKAGE_NAME} is based on qadsl 1.2.1 by Jakob Stasilowicz,
@url{http://kuba.unix.se}.  It was completely rewritten by Joachim
Nilsson for version 1.3.0 and had its named changed in version 1.3.4
when it was dubbed a GNU pacakge.

@value{PACKAGE_NAME} is free to share and change under the conditions
stipulated in the GNU General Public License.  For details and
examples see @ref{Copying}.

@end ifinfo

@c All the menus can be updated with the EMACS command
@c texinfo-all-menus-update, which is normally bound to C-c C-u C-a.
@menu
* Introduction::                Introduction and history of qadsl/alive.
* Sample::                      Sample output from @value{PACKAGE_NAME}.
* Invoking @value{PACKAGE_NAME}::              How to run @value{PACKAGE_NAME}.
* Setting Up::                  Basic setup instructions.
* Config File Format::          Describes the @value{PACKAGE_NAME}
                                config file.
* Reporting Bugs::              Savannah Bug reporting.
* Copying::                     The GNU General Public License gives
                                you permission to redistribute
                                @value{PACKAGE_NAME} on certain terms;
                                it also explains that there is no
                                warranty.
* Concept Index::               Index of concepts.


@end menu

@node Introduction, Sample, Top, Top
@section Introduction
@cindex Introduction
@ifinfo
Frustrated about having to "log in" to your paid Internet connection?

@value{PACKAGE_NAME} is a small utility that automates the login
process to Telia, COMHEM, Tiscali and other Internet Service
Providers, ISPs. It features a keep-alive daemon that periodically
connects to your ISP ensuring that your connection to the Internet are
not logged out all of a sudden.

@value{PACKAGE_NAME} works for any type of connection where your ISP
has put a login server in your way.

In fact, @value{PACKAGE_NAME} does not necessarily have to be used as
Internet connection keeper, it can be used for any type of Internet
based login service.

GNU Alive was previously known as qadsl.

@section Copyrights & License
Copyright (C) 2001 Jakob Stasilowicz@*
Copyright (C) 2003, 2004 Joachim Nilsson

Permission is granted to make and distribute verbatim copies of
this manual provided the copyright notice and this permission notice
are preserved on all copies.

@ignore
Permission is granted to process this file through TeX and print the
results, provided the printed document carries copying permission
notice identical to this one except for the removal of this paragraph
(this paragraph not being relevant to the printed manual).

@end ignore
Permission is granted to copy and distribute modified versions of this
manual under the conditions for verbatim copying, provided that the
entire resulting derived work is distributed under the terms of a
permission notice identical to this one.

Permission is granted to copy and distribute translations of this
manual into another language, under the above conditions for modified
versions, except that this permission notice may be stated in a
translation approved by the Foundation.
@end ifinfo

@titlepage
@title @value{PACKAGE_NAME}
@subtitle Auto-login & keep-alive daemon for Internet connections.
@subtitle for @value{PACKAGE_NAME} ver. @value{PACKAGE_VERSION}
@author by Joachim Nilsson

@page
@vskip 0pt plus 1filll
Copyright @copyright{} 2003, 2004 Joachim Nilsson

Permission is granted to make and distribute verbatim copies of
this manual provided the copyright notice and this permission notice
are preserved on all copies.

Permission is granted to copy and distribute modified versions of this
manual under the conditions for verbatim copying, provided that the
entire resulting derived work is distributed under the terms of a
permission notice identical to this one.

Permission is granted to copy and distribute translations of this
manual into another language, under the above conditions for modified
versions, except that this permission notice may be stated in a
translation approved by the Foundation.
@end titlepage

@shortcontents
@contents

@node Sample, Invoking @value{PACKAGE_NAME}, Introduction, Top
@chapter Sample Output
@cindex starting
@cindex running
@cindex sample

@value{PACKAGE_NAME} produces the familiar, UNIX traditional, complete
lack of output when everything works.  Using the switches
@code{--verbose} and @code{--debug} more interesting information is
printed, both to logfile(s) and screen.


Here are some realistic examples of running @value{PACKAGE_NAME}.

This is the output of the command @samp{@value{PACKAGE_NAME} --login} when there is
an already running instance of @value{PACKAGE_NAME}:

@example
 ERR @value{PACKAGE_NAME}[4777]: kill(788, SIGHUP) failed: Operation not permitted
Maybe a stale lockfile (/tmp/@value{PACKAGE_NAME}.pid) is present and the damon is not running?
 ERR @value{PACKAGE_NAME}[4777]: Couldn't remove possible stale lockfile (/tmp/@value{PACKAGE_NAME}.pid).
Maybe the process (788) is running as root, but you are not?
@end example

This is the output of the command @samp{@value{PACKAGE_NAME} --help}:

@example
@value{PACKAGE_NAME} - Auto-login & keep-alive for Internet connections.

Usage: @value{PACKAGE_NAME} [-h] [-c conffile] [-p pidfile] [-loPsvV]
Options:
-l, --login               Try to login.
-q, --quit                Quit daemon, don't logout.
-o, --logout              Try to logout.
-c, --conf-file=FILE      Use settings from FILE instead of default /etc/@value{PACKAGE_NAME}.conf.
-p, --pid-file=FILE       Use FILE to store PID.
-P, --port=PORT           Connect to PORT on server, default is 80.
-s, --status              Display status of @value{PACKAGE_NAME} daemon.
-v, --verbose             Display more information, on screen and in logfile.
-d, --debug               Display even more information, huge amounts!
-V, --version             Display version information and exit.
-h, --help                Display this help and exist.

Report bugs to <http://savannah.gnu.org/bugs/?group=@value{PACKAGE_NAME}>
@end example

@node Invoking @value{PACKAGE_NAME}, Setting Up, Sample, Top
@chapter Invoking @value{PACKAGE_NAME}
@cindex invoking
@cindex version
@cindex options
@cindex usage
@cindex help
@cindex getting help

The format for running the @value{PACKAGE_NAME} program is:

@example
@value{PACKAGE_NAME} @var{option} @dots{}
@end example

@value{PACKAGE_NAME} supports the following options:

@c Formatting copied from the Texinfo 4.0 manual.
@table @code
@item --verbose
@itemx -v
Print more information.

@item --debug
@itemx -d
Print even more information, huge amounts.

@item --login
@itemx -l
Login to the Internet connection.

@item --quit
@itemx -q
Quit daemon, do not logout. Contrary to logout this option only
exits the daemon leaving the connection open.

@item --logout
@itemx -o
Logout from the Internet connection.

@item --status
@itemx -s
Show status of @value{PACKAGE_NAME}, is the keep-alive daemon running or not?

@item --pid-file=file
@itemx -p file
Use file as lock file instead of the default /var/run/@value{PACKAGE_NAME}.pid

@item --port=PORT
@itemx -P PORT
Connect to PORT on server, default is a system dependant value
that you can see by running @samp{@value{PACKAGE_NAME} --help} under the
port option.  However, it is most likely port 80.

@item --conf-file=file
@itemx -c file
Use file as configuration file instead of the default
/etc/@value{PACKAGE_NAME}.conf or ~/.@value{PACKAGE_NAME}rc.

Please note, if neither of the default files can be found the
old names /etc/qadsl.conf and ~/.qadslrc are also searched for.

@item --help
@itemx -?
Print an informative help message describing the options and then exit
successfully.

@item --usage
Briefly list the options.

@item --version
@itemx -V
Print the version number of @value{PACKAGE_NAME} on the standard output
and then exit successfully.
@end table

@node Setting Up, Config File Format, Invoking @value{PACKAGE_NAME}, Top
@chapter Setting Up
@cindex setup
@cindex Config file format
Start off by taking a close look at the sample configuration file
included with @value{PACKAGE_NAME}, it is called @file{@value{PACKAGE_NAME}.conf} and, depending
on your system, it may already be installed in @file{/etc/@value{PACKAGE_NAME}.conf}.

Please note, if neither of the default files can be found the
old names /etc/qadsl.conf and ~/.qadslrc are also searched for.

The configuration file basically needs three things for you to setup,
all of which you should have received from your ISP:
@enumerate 1
@item
Name, IP# or URL to login server
@item
Login ID
@item
Password
@end enumerate

In the configuration file this could, for example, look something
like this:

@example
@cartouche
# Login server
SERVER = valo1.tiscali.se

# Username
USERNAME = 123456@@tiscali

# Password
PASSWORD = imrekertesz
@end cartouche
@end example

Different providers have setup their login servers differently.
See the sample @value{PACKAGE_NAME}.conf file included in this package for
help on setting up @value{PACKAGE_NAME} for your ISP.  However, the above
example is probably all you really need to setup.

Nevertheless, if you experience problems, try using the flags
@code{--verbose} and @code{--debug}.  They increase the useful output
from @value{PACKAGE_NAME} to let you see all the interactions between
@value{PACKAGE_NAME} and the login server.  Beware, though, that when
the login daemon has started you will not see anything more on your
screen. Instead you have to consult the system logfiles.  On a Debian
system the file /var/log/daemon.log is where @value{PACKAGE_NAME} logs
go.  Other systems may have to inspect how syslogd is setup by
inspecting the @file{/etc/syslog.conf} file.

@node Config File Format, Reporting Bugs, Setting Up, Top
@chapter Config File Format
Here follows a very brief rundown of available configuration file
parameters.

@table @code
@item USER
@itemx USERNAME
Your login username.

Default: None, must be set by you.

@item PASS
@itemx PASSWORD
Your login password.

Default: None, must be set by you.

@item SERV
@itemx SERVER
@itemx LOGIN_SERVER
Name, IP number or URL to YOUR ISP login server, e.g.,
valo1.tiscali.se, login1.telia.com, login1.comhem.se.

The IP number is often 10.0.0.6 or 192.168.2.1 and could be a safe
bet to fall back on if the DNS fails to resolve the above names.

Default: 10.0.0.6

@item PORT
@itemx SERVER_PORT
Port to connect to on login server.  This is usually set to be port
80, http, but is defined at build time so it is system dependant.
To find out what your @value{PACKAGE_NAME} binary was built with read the --help
option for the port setting.

Default: Depends on how @value{PACKAGE_NAME} was built, but probably 80

@item  DEAMON_S
@itemx DEAMON_START
@itemx DAEMON_START
@itemx START_DEAMON
@itemx START_DAEMON
Start automatic keep-alive daemon, TRUE or FALSE.  This daemon is what
continously keeps your connection alive.

Default: TRUE

@item  DEAMON_T
@itemx DEAMON_TYPE
@itemx DAEMON_TYPE
Daemon type, PING or LOGIN.  This determines weather the keep-alive
daemon should just ``ping'' or do a complete login when the connection
is down.  Should be left in the default setting, unless very special
circumstances exist.

The PING value needs some explanation.  Every time the alive daemon
wakes up it always sends out an HTTP request for the page ``/sd/init''
from the login server.  If still logged in the server responds by
redirecting to an Internet page, probably the ISP's home page.
However, if not logged in /sd/init is the actual login page and thus
the alive daemon consults this config setting: ``Should I login or
not?''.  If set to PING the daemon does @emph{not} login and goes back
to sleep.  The ``ping'' feature is thus not a true ICMP ping but a
try-to-access-the-Internet-type-of-ping.


Default: LOGIN

@item  DEAMON_D
@itemx DEAMON_DELAY
@itemx DAEMON_DELAY
@itemx INTERVAL
Time in minutes for the keep-alive daemon to sleep between each
connection check.

Default: 5

@item  PID_FILE
Complete path to the lock file.  Usually @file{/var/lock/@value{PACKAGE_NAME}.pid},
but will probaly vary between different systems.

Default: Determined at build time.

@item  INIT_PAGE
@itemx INIT
This page on the login server will be requested @emph{before} doing the
actual login.  If this is set to the empty string, "", then the
login script on the server will be called immediately.

Default: "/sd/init"

@item LOGIN_PAGE
@itemx LOGIN
The INIT_PAGE displays the login form in which this login page is
listed.  The USERNAME and PASSWORD is sent to this page.

If the default setting does not work the corrent login page name can
be found by using the @code{--verbose} and @code{--debug} flags to the
@code{--login} command.  The page name is listed at the beginning of
the ``<FORM...>'' tag.  Example:

@example
<FORM NAME="pwdenter" ACTION="login" METHOD="POST">
@end example

In the above example ``ACTION'' is set to ``login'', which in this
case means ``/sd/login'' because the the INIT_PAGE was located at
``/sd/init''.  So, unless ACTION begins with a slash the LOGIN_PAGE
location is relative to the location of the INIT_PAGE.

Confused yet?  Then just send the maintainer an email or checkout the
website or mailing lists, someone else might have already fixed your
problem.

Default: "/sd/login"

@item LOGOUT_PAGE
@itemx LOGOUT
Page with logout button on the login server.  You might not ever use
this functionality, but it is here because of both symmetry reasons
and future use.  So, unless you do @emph{not} pay flat rate for your
Internet connection you can probably stop reading now.

However, if the default value does not work for you the LOGIN_PAGE
description might help you.  In this case you wait for the login to
complete and redirect you to --- on the redirect page there is very
likely a small form saying something like this:

@example
<FORM NAME="logout" ACTION="logout" METHOD="POST">
<INPUT TYPE="submit" NAME="logout" VALUE="Logout">
</FORM>
@end example

Again, the ACTION field specifies the page/script on the login server
to be called and is the relative path.  So, for this, as for the above
example, the LOGOUT_PAGE is composed from the base URL plus the
contents of the ACTION field to be ``/sd/logout''.

Default: "/sd/logout"

@item LOGGED_IN_STRING
Substring to search for in login reply from server,
used to determine if logged in or not.  This can be found by running
@value{PACKAGE_NAME} with the --verbose and --debug flags in conjuction with --login.

@item LOGGED_OUT_STRING
Substring to search for in logout reply from server,
used to determine if logged out properly.  This can be found by
running @value{PACKAGE_NAME} with the @code{--verbose} and @code{--debug} flags in
conjuction with @code{--logout}.

@item  LOGIN_STRING_HEADER
@itemx LOGIN_DATA_HEADER

Default: ""

@item USERNAME_KEY

Default: "username"

@item PASSWORD_KEY

Default: "password"

@item  LOGIN_STRING_FOOTER
@itemx LOGIN_DATA_FOOTER

These fields are used to compose the actual login string sent to the
login page/script on the login server. It is composed as follows; if
a LOGIN_STRING_HEADER is specified it is put first on the login
string, second is the USERNAME_KEY followed by a '=' sign plus the
value of the USERNAME setting.  This is followed by an '&' the value
of the PASSWORD_KEY another '=' sign and the value of PASSWORD.  Now,
if the LOGIN_STRING_FOOTER is defined the login string is concluded
with yet another '&' and the value of the LOGIN_STRING_FOOTER.

Default: "submitForm=Login"

@end table

@node Reporting Bugs, Copying, Config File Format, Top
@chapter Reporting Bugs
@cindex bugs
@cindex problems

If you find a bug in @value{PACKAGE_NAME}, please report it using the
Savannah bug report tool at
@url{http://savannah.nongnu.org/bugs/?group=@value{PACKAGE_NAME}} or
to the mailing list.

Include the version number, which you can find by running
@w{@samp{@value{PACKAGE_NAME} --version}}.  Also include in your
message the output that the program produced and the output you
expected.@refill

If you have other questions, comments or suggestions about
@value{PACKAGE_NAME}, use the mailing lists listed on the
@value{PACKAGE_NAME} project page on Savannah,
@url{http://savannah.gnu.org/projects/@value{PACKAGE_NAME}/}.  The
author will try to help you out, although he may not have time to fix
your problems.


@node Copying, Concept Index, Reporting Bugs, Top
@unnumbered Copying
@cindex License
@include gpl.texinfo

@node Concept Index,  , Copying, Top
@unnumbered Concept Index

@printindex cp
@bye
